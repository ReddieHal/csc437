import{d as u,R as g}from"./ranch-cattle-Bs8r2Xwi.js";u({"ranch-cattle":g});const l=document.getElementById("cattle-form");l.addEventListener("submit",async t=>{t.preventDefault();const a=new FormData(l),e={};for(const[o,r]of a.entries())r!==null&&r!==""&&(e[o]=r);const n=["cattleId","name","breed","gender"].filter(o=>!e[o]);if(n.length>0){alert(`Please fill in all required fields: ${n.join(", ")}`);return}e.dateOfBirth&&(e.dateOfBirth=new Date(e.dateOfBirth).toISOString()),e.weight&&(e.weight=Number(e.weight)),console.log("Submitting cattle data:",e);try{const o=await fetch("/api/cattle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok){const d=await o.json().catch(()=>null);throw new Error((d==null?void 0:d.message)||`Error: ${o.status}`)}l.reset(),alert("Cattle added successfully!");const r=document.querySelector("ranch-cattle");if(r){const d=r.parentNode;if(d){const s=document.createElement("ranch-cattle");s.setAttribute("src","/api/cattle"),d.replaceChild(s,r)}}}catch(o){console.error("Error adding cattle:",o),alert(`Failed to add cattle: ${o.message}`)}});const i=document.querySelectorAll(".tabs button");i.forEach(t=>{t.addEventListener("click",()=>{i.forEach(e=>e.classList.remove("active")),t.classList.add("active");const a=document.querySelector("ranch-cattle");if(a){let e="/api/cattle";if(t.textContent==="Bulls")e="/cattle?gender=male";else if(t.textContent==="Heifers")e="/api/cattle?gender=female";else if(t.textContent==="Calves"){const n=new Date;n.setFullYear(n.getFullYear()-1),e=`/api/cattle?dateOfBirth[gte]=${n.toISOString()}`}const c=a.parentNode;if(c){const n=document.createElement("ranch-cattle");n.setAttribute("src",e),c.replaceChild(n,a)}}})});const m=document.getElementById("darkSwitch");function f(){const t=localStorage.getItem("darkMode")==="true";document.body.style.transition="none",document.body.classList.toggle("dark-mode",t),m.checked=t,document.body.offsetWidth,setTimeout(()=>{document.body.style.transition=""},10),m.closest(".dark-mode-toggle").addEventListener("change",h),document.body.addEventListener("darkmode:toggle",k)}function h(t){t.stopPropagation();const a=t.target.checked,e=new CustomEvent("darkmode:toggle",{bubbles:!0,detail:{isDarkMode:a}});document.body.dispatchEvent(e)}function k(t){const a=t.detail.isDarkMode;document.body.classList.toggle("dark-mode",a),localStorage.setItem("darkMode",a)}document.addEventListener("DOMContentLoaded",f);
