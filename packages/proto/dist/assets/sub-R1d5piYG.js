import"./ranch-cattle-BOaSP52H.js";const l=document.getElementById("cattle-form");l.addEventListener("submit",async t=>{t.preventDefault();const o=new FormData(l),e={};for(const[n,r]of o.entries())r!==null&&r!==""&&(e[n]=r);const a=["cattleId","name","breed","gender"].filter(n=>!e[n]);if(a.length>0){alert(`Please fill in all required fields: ${a.join(", ")}`);return}e.dateOfBirth&&(e.dateOfBirth=new Date(e.dateOfBirth).toISOString()),e.weight&&(e.weight=Number(e.weight)),console.log("Submitting cattle data:",e);try{const n=await fetch("/cattle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const d=await n.json().catch(()=>null);throw new Error((d==null?void 0:d.message)||`Error: ${n.status}`)}l.reset(),alert("Cattle added successfully!");const r=document.querySelector("ranch-cattle");if(r){const d=r.parentNode;if(d){const s=document.createElement("ranch-cattle");s.setAttribute("src","/cattle"),d.replaceChild(s,r)}}}catch(n){console.error("Error adding cattle:",n),alert(`Failed to add cattle: ${n.message}`)}});const i=document.querySelectorAll(".tabs button");i.forEach(t=>{t.addEventListener("click",()=>{i.forEach(e=>e.classList.remove("active")),t.classList.add("active");const o=document.querySelector("ranch-cattle");if(o){let e="/cattle";if(t.textContent==="Bulls")e="/cattle?gender=male";else if(t.textContent==="Heifers")e="/cattle?gender=female";else if(t.textContent==="Calves"){const a=new Date;a.setFullYear(a.getFullYear()-1),e=`/cattle?dateOfBirth[gte]=${a.toISOString()}`}const c=o.parentNode;if(c){const a=document.createElement("ranch-cattle");a.setAttribute("src",e),c.replaceChild(a,o)}}})});const m=document.getElementById("darkSwitch");function u(){const t=localStorage.getItem("darkMode")==="true";document.body.style.transition="none",document.body.classList.toggle("dark-mode",t),m.checked=t,document.body.offsetWidth,setTimeout(()=>{document.body.style.transition=""},10),m.closest(".dark-mode-toggle").addEventListener("change",g),document.body.addEventListener("darkmode:toggle",f)}function g(t){t.stopPropagation();const o=t.target.checked,e=new CustomEvent("darkmode:toggle",{bubbles:!0,detail:{isDarkMode:o}});document.body.dispatchEvent(e)}function f(t){const o=t.detail.isDarkMode;document.body.classList.toggle("dark-mode",o),localStorage.setItem("darkMode",o)}document.addEventListener("DOMContentLoaded",u);
